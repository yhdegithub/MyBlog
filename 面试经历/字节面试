###  1、字节面试 - 平台研发岗

一共三面技术，挂在了第三面，后天又被捞，要重新走流程了。全程面试有个小管家微信和邮箱安排的时间，很贴心，每面都视频面。

> 一面，技术基础面，问的很深，面试内容主要是基本技术的延展，1小时，大概流程如下

- 1、自我介绍 + 离职原因

- 2、根据简历上描写的熟悉的技能，挨个挨个询问

  ```
  2.1  Java方面,全是Java多线程知识。
  - countDownLatch的用法、适用场景，注意事项。 这个给看过，叽叽咕咕说了一堆
  - 了解AQS吗？ AQS底层原理是什么？这个结构怎么实现公平锁和非公平锁的？  就是一个队列+volatile的state变量，而公平非公平锁的实现不知道，瞎说了一些
  - volatile的底层原理
  - 知道Callable方法吗？ 有返回值
  - 那么你知道callable实现fork/join模式吗？   分而治之
  - threadLocal 问了底层结构，还有给了个场景问有啥问题，这个比较难，光看八股文没用
  
  2.2 MySQL
     MyySQL直接叫网页写一道SQL， 就是一个左外连接的题，一次join即可。 题目是一个员工表，一个部门表，左外查询所有员工分配部门的信息，注意没分配部门的员工的部门为NULL
        
  2.3 Redis
   - Redis的几种数据结构，了解哪些，用过哪些？ 我说只用过String
   - 用过的String,底层结构是什么？  redis自己设定的SDS，没用原来的String
   - 知道哨兵和集群模式的区别吗？  说了一串，自己本地搭过
   - 问项目中Redis版本，该版本集群有啥缺陷？  自己准备过了，说了几个缺陷，面试官嗯嗯的，挺满意。
     缺陷说的是set必须设置时间，否则每次set都会使得原来的生存时间失效；
     AOF其实丢失数据不止1秒，应该为2秒（有个刷盘时间1S）；
     master和salve内存大小配置不同，致使数据可能不一致；
     salave查询到过期数据，因为salve从不主动删除数据
   - 缓存穿透和击穿。 这两个个概念我好像搞混了
   - 看过源码没有？
  ```

- 3、算法题

  ```
  网页上写，然后面试官随便输入一个数据，执行代码，我这边看的到报错信息，然后进行修改
  
  1、前序中序建树,运气好，bugfree
     我写的求根节点划分左右子树的时候，其实用个map结构保存下标效率会更高，面试官提出来
     
  2、第K个字符串， 输入m,n，k.  m,n代表A，B最大出现次数, 输出第K小的字符串
      比如m =2, n = 1, k =3
      那么按照顺序，应该是  A，AA，AAB，AB，ABA，B，BA，BAA， 那么第K小的就是AAB了。 这个题运行了几次，然后过的 
  
  ```

提问环节有啥没做好，面试官给的建议就是多看源码，多去底层研究。

>二面是北京的给面的，难度降低不少,时间70分钟

```
- 基础很简单，就问一下简历中写到的countDownLatch，回答说会阻塞主线程，面试官满意这个回答，毕竟八股文可没说这个 
- 然后问了synchronize，lock原理，你一般倾向使用哪个？？就说自己用synchronize得多嘛，Java设计者在优化synchronize，说明未来更重视这个关键字的，就是了找个理由说服他就是
- 然后直接就是聊项目。做了那些工作，你觉得有什么做的好的？
  我提了两个，一个技术上的，一个业务上的，做的比较好的。 聊了10分钟
- 再问了一个，项目运行期间，有做过什么线上问题？  说了一个内存报警的问题，还有开发环境，线上环境SQL版本不一致的问题
- 算法题
  就一个，简单题。 检查一个链表是否是回文的。  比如 1>2>2>1 这个链表就是回文的
  我说用栈，然后叫我优化
  然后就说快慢指针，找到后面部分数据 2>1, 然后逆置过来  1>2 。再和前半部分链表1>2比较。空间复杂度就变成了O(1). 思路是对的,但写起来就很麻烦， 在写原地逆置链表，还有万一原来链表是奇数长度，偶数长度要不要考虑
  面试官那边case只过了一半，肯定我写法没问题，但网页上确实不好调试

```

> 三面项目，难得多，没考算法题， 不到30分钟

```
- 自我介绍 + 项目介绍

- 项目的整体设计，模块之间的交互？ 我的就任务池、任务处理、流程监控几个模块的交付，跑批时间设置。
  期间还有你来我往的讨论，面试官的质疑项目做法
  
- 了解分库分表不？ 说了解过Sharding-sphere，沟通了下分表依据， 每个数据表几百个属性字段才算多  

- 场景设计题
   假设有个表，按照时间划分成水平10个子表。某一天，业务上来了，想要把表扩张到100张表，你怎么能把原来的业务（只有10张表）平滑过渡到目标上（100张表）？
   我没经验，给说可不可以原来0...9号表，每张表再对应10张表，从00,01....99，用双写模式，两种系统的表同时保存与修改数据，然后在深夜切换过来。
   答得稀烂，因为真的没准备过系统设计的题，这个问题对我完全超纲 
```



 目前三面挂了，HR叫换一个部门，重新面，心塞。。。。。
